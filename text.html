<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JMU CS Colors - Semester Text</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="icon" href="https://fav.farm/ðŸŽ¨">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XR9HFSYX4R"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-XR9HFSYX4R');
  </script>

</head>

<body>
  <h1>CS Courses as hex colors</h1>
  <p>This version encodes the semester where <code>Fall 2025</code> is <code>F25</code>, but the <code>S</code> for
    <code>Spring</code> isn't valid in hex, so use a <code>5</code>.
  </p>
  <main class="table-responsive">
    <table class="table" id="colors">
      <thead>
        <tr id="courses">
          <th scope="col">sem</th>
        </tr>
      </thead>
      <tbody>

      </tbody>
    </table>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    crossorigin="anonymous"></script>
  <script type="module" src="wcag-contrast.js"></script>
  <script type="module">
    import { wcagResults } from './wcag-contrast.js'
    const courses = [
      "101", "149", "159", "227", "240", "261", "280", "327", "330", "332", "343", "345", "347", "349", "354", "361", "374", "412", "430", "432", "442", "444", "445", "446", "447", "448", "449", "450", "452", "455", "456", "457", "458", "462", "470", "480", "482", "488", "497", "499A", "499B", "499C",
    ]


    const courseHeaders = courses.map(c => `<th scope="col" id="${c}">${c}</td>`)
    document.getElementById('courses').innerHTML += courseHeaders.join("")

    const semesterPrefixes = ['5', 'F']

    const courseColors = []
    const tbody = document.querySelector('tbody')
    for (let year = 17; year < 50; year++) {
      semesterPrefixes.forEach(prefix => {
        const yearRow = document.createElement('tr')
        yearRow.innerHTML = `<th scope="row">${prefix}${year}</th>`
        courseColors.push(...courses.map(c => {
          let semPrefix = ''
          if (c.length == 3) {
            semPrefix = prefix
          }
          const color = `${c}${semPrefix}${year}`
          const cell = document.createElement('td')
          let foreground = ''
          const contrast = wcagResults('000000', color);
          console.log(`wcagResults('000000', ${color})`, contrast, contrast.passes.AAA_normal)
          if (!contrast.passes.AA_normal) {
            foreground = 'color: #ffffff;'
          }
          cell.style = `background-color:#${color};${foreground}`
          cell.textContent = color;
          yearRow.appendChild(cell)
          return color
        }))
        tbody.appendChild(yearRow)
      })
    }
    console.log(courseColors)
  </script>
</body>

</html>